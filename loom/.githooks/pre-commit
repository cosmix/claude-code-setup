#!/bin/sh
# Pre-commit hook: ensure Rust code is properly formatted

# Get the repo root (where .git is)
REPO_ROOT="$(git rev-parse --show-toplevel)"

# Run cargo fmt check in the loom directory
cd "$REPO_ROOT/loom" || exit 1

if ! cargo fmt --check 2>/dev/null; then
    echo ""
    echo "ERROR: Rust code is not formatted correctly."
    echo "Run 'cargo fmt' in the loom/ directory to fix."
    echo ""
    exit 1
fi
