#!/bin/sh
# Pre-commit hook: auto-format Rust and markdown files

# Get the repo root (where .git is)
REPO_ROOT="$(git rev-parse --show-toplevel)"

echo "Running pre-commit formatting..."

# Auto-format Rust code
echo "Formatting Rust code..."
cd "$REPO_ROOT/loom" || exit 1
cargo fmt

# Auto-fix markdown files
echo "Linting markdown files..."
cd "$REPO_ROOT" || exit 1
bunx markdownlint-cli2 --fix "**/*.md" 2>/dev/null || true

echo "Pre-commit formatting complete."
